---
title: 使用 Azure 和 Azure Stack Hub 的階層式資料分析模式
description: 了解如何使用 Azure 與 Azure Stack Hub 來跨混合式雲端實作階層式資料解決方案。
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: b671fa9f47fa51ab6e40633c04964957d613fec2
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/17/2020
ms.locfileid: "84910154"
---
# <a name="tiered-data-for-analytics-pattern"></a><span data-ttu-id="56ca2-103">階層式資料分析模式</span><span class="sxs-lookup"><span data-stu-id="56ca2-103">Tiered data for analytics pattern</span></span>

<span data-ttu-id="56ca2-104">此模式說明如何使用 Azure Stack Hub 與 Azure，跨多個內部部署與雲端位置暫存、分析、處理及儲存資料。</span><span class="sxs-lookup"><span data-stu-id="56ca2-104">This pattern illustrates how to use Azure Stack Hub and Azure to stage, analyze, process, sanitize, and store data across multiple on-premises and cloud locations.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="56ca2-105">內容和問題</span><span class="sxs-lookup"><span data-stu-id="56ca2-105">Context and problem</span></span>

<span data-ttu-id="56ca2-106">現代化技術領域中的企業組織所面臨的其中一個問題就是保護資料儲存安全、處理及分析。</span><span class="sxs-lookup"><span data-stu-id="56ca2-106">One of the problems facing enterprise organizations in the modern technology landscape concerns secure data storage, processing, and analyzing.</span></span> <span data-ttu-id="56ca2-107">考量項目包括：</span><span class="sxs-lookup"><span data-stu-id="56ca2-107">Considerations include:</span></span>

- <span data-ttu-id="56ca2-108">資料內容</span><span class="sxs-lookup"><span data-stu-id="56ca2-108">data content</span></span>
- <span data-ttu-id="56ca2-109">location</span><span class="sxs-lookup"><span data-stu-id="56ca2-109">location</span></span>
- <span data-ttu-id="56ca2-110">安全性與隱私權需求</span><span class="sxs-lookup"><span data-stu-id="56ca2-110">security and privacy requirements</span></span>
- <span data-ttu-id="56ca2-111">存取權限</span><span class="sxs-lookup"><span data-stu-id="56ca2-111">access permissions</span></span>
- <span data-ttu-id="56ca2-112">維護</span><span class="sxs-lookup"><span data-stu-id="56ca2-112">maintenance</span></span>
- <span data-ttu-id="56ca2-113">儲存體倉儲</span><span class="sxs-lookup"><span data-stu-id="56ca2-113">storage warehousing</span></span>

<span data-ttu-id="56ca2-114">Azure 與 Azure Stack Hun 結合，可解決資料疑慮，並提供低成本解決方案。</span><span class="sxs-lookup"><span data-stu-id="56ca2-114">Azure, in combination with Azure Stack Hub, addresses data concerns and offers low-cost solutions.</span></span> <span data-ttu-id="56ca2-115">此解決方案最適合透過分散式製造或物流公司來示範。</span><span class="sxs-lookup"><span data-stu-id="56ca2-115">This solution is best expressed through a distributed manufacturing or logistics company.</span></span>

<span data-ttu-id="56ca2-116">此解決方案是以下列案例為基礎：</span><span class="sxs-lookup"><span data-stu-id="56ca2-116">The solution is based on the following scenario:</span></span>

- <span data-ttu-id="56ca2-117">大型的多分支製造組織。</span><span class="sxs-lookup"><span data-stu-id="56ca2-117">A large multi-branch manufacturing organization.</span></span>
- <span data-ttu-id="56ca2-118">需要在全球遠端位置和中央總部之間快速且安全地儲存、處理及散發資料。</span><span class="sxs-lookup"><span data-stu-id="56ca2-118">Rapid and secure data storage, processing, and distribution between global remote locations and its central headquarters are required.</span></span>
- <span data-ttu-id="56ca2-119">必須維持安全的員工與機械活動、設施資訊與業務報告資料。</span><span class="sxs-lookup"><span data-stu-id="56ca2-119">Employee and machinery activity, facility information, and business reporting data that must remain secure.</span></span> <span data-ttu-id="56ca2-120">資料必須適當地散發，並符合區域合規性原則與業界法規。</span><span class="sxs-lookup"><span data-stu-id="56ca2-120">The data must be distributed appropriately and meet regional compliance policy and industry regulations.</span></span>

## <a name="solution"></a><span data-ttu-id="56ca2-121">解決方法</span><span class="sxs-lookup"><span data-stu-id="56ca2-121">Solution</span></span>

<span data-ttu-id="56ca2-122">使用內部部署與公用雲端環境來滿足擁有許多設備企業的需求。</span><span class="sxs-lookup"><span data-stu-id="56ca2-122">Using both on-premises and public cloud environments meets the demands of multi-facility enterprises.</span></span> <span data-ttu-id="56ca2-123">Azure Stack Hub 提供快速、安全且彈性的解決方案來收集、處理、儲存及散發本機與遠端資料。</span><span class="sxs-lookup"><span data-stu-id="56ca2-123">Azure Stack Hub offers a rapid, secure, and flexible solution for collecting, processing, storing, and distributing local and remote data.</span></span> <span data-ttu-id="56ca2-124">當安全性、機密性、公司政策和法規需求在位置和使用者之間有所差異時，此模式特別實用。</span><span class="sxs-lookup"><span data-stu-id="56ca2-124">This pattern is especially useful when security, confidentiality, corporate policy, and regulatory requirements may differ between locations and users.</span></span>

![階層式資料分析模式解決方案架構](media/pattern-tiered-data-analytics/solution-architecture.png)

## <a name="components"></a><span data-ttu-id="56ca2-126">元件</span><span class="sxs-lookup"><span data-stu-id="56ca2-126">Components</span></span>

<span data-ttu-id="56ca2-127">此模式使用下列元件：</span><span class="sxs-lookup"><span data-stu-id="56ca2-127">This pattern uses the following components:</span></span>

| <span data-ttu-id="56ca2-128">階層</span><span class="sxs-lookup"><span data-stu-id="56ca2-128">Layer</span></span> | <span data-ttu-id="56ca2-129">元件</span><span class="sxs-lookup"><span data-stu-id="56ca2-129">Component</span></span> | <span data-ttu-id="56ca2-130">描述</span><span class="sxs-lookup"><span data-stu-id="56ca2-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="56ca2-131">Azure</span><span class="sxs-lookup"><span data-stu-id="56ca2-131">Azure</span></span> | <span data-ttu-id="56ca2-132">儲存體</span><span class="sxs-lookup"><span data-stu-id="56ca2-132">Storage</span></span> | <span data-ttu-id="56ca2-133">[Azure 儲存體](/azure/storage/)帳戶提供乾淨的資料取用端點。</span><span class="sxs-lookup"><span data-stu-id="56ca2-133">An [Azure Storage](/azure/storage/) account provides a sterile data consumption endpoint.</span></span> <span data-ttu-id="56ca2-134">Azure 儲存體是 Microsoft 針對最新資料儲存體環境推出的雲端儲存體解決方案。</span><span class="sxs-lookup"><span data-stu-id="56ca2-134">Azure Storage is Microsoft's cloud storage solution for modern data storage scenarios.</span></span> <span data-ttu-id="56ca2-135">Azure 儲存體提供可大幅調整的資料物件存放區，以及雲端檔案系統服務。</span><span class="sxs-lookup"><span data-stu-id="56ca2-135">Azure Storage offers a massively scalable object store for data objects and a file system service for the cloud.</span></span> <span data-ttu-id="56ca2-136">其也提供可用於進行可靠傳訊的訊息存放區，以及 NoSQL 存放區。</span><span class="sxs-lookup"><span data-stu-id="56ca2-136">It also provides a messaging store for reliable messaging and a NoSQL store.</span></span> |
| <span data-ttu-id="56ca2-137">Azure Stack Hub</span><span class="sxs-lookup"><span data-stu-id="56ca2-137">Azure Stack Hub</span></span> | <span data-ttu-id="56ca2-138">儲存體</span><span class="sxs-lookup"><span data-stu-id="56ca2-138">Storage</span></span> | <span data-ttu-id="56ca2-139">[Azure Stack Hub 儲存體](/azure-stack/user/azure-stack-storage-overview)帳戶會用於建立多個服務：</span><span class="sxs-lookup"><span data-stu-id="56ca2-139">An [Azure Stack Hub Storage](/azure-stack/user/azure-stack-storage-overview) account is used for multiple services:</span></span><br><br><span data-ttu-id="56ca2-140">用於儲存原始資料的 - **Blob 儲存體**。</span><span class="sxs-lookup"><span data-stu-id="56ca2-140">- **Blob storage** for raw data storage.</span></span> <span data-ttu-id="56ca2-141">Blob 儲存體可以儲存任何類型的文字或二進位資料，例如文件、媒體檔案或應用程式安裝程式。</span><span class="sxs-lookup"><span data-stu-id="56ca2-141">Blob storage can hold any type of text or binary data, such as a document, media file, or app installer.</span></span> <span data-ttu-id="56ca2-142">每個 Blob 會在容器下形成組織。</span><span class="sxs-lookup"><span data-stu-id="56ca2-142">Every blob is organized under a container.</span></span> <span data-ttu-id="56ca2-143">容器提供對物件群組指派安全原則的實用方式。</span><span class="sxs-lookup"><span data-stu-id="56ca2-143">Containers provide a useful way to assign security policies to groups of objects.</span></span> <span data-ttu-id="56ca2-144">儲存體帳戶可包含任意數目的容器，而容器可包含任意數目的 Blob，儲存體帳戶的容量限制高達 500 TB。</span><span class="sxs-lookup"><span data-stu-id="56ca2-144">A storage account may contain any number of containers, and a container can contain any number of blobs, up to the 500-TB capacity limit of the storage account.</span></span><br><span data-ttu-id="56ca2-145">用於資料封存的- **Blob 儲存體**。</span><span class="sxs-lookup"><span data-stu-id="56ca2-145">- **Blob storage** for data archive.</span></span> <span data-ttu-id="56ca2-146">適用於非經常性存取層資料封存的低成本儲存體有其優點。</span><span class="sxs-lookup"><span data-stu-id="56ca2-146">There are benefits to low-cost storage for cool data archiving.</span></span> <span data-ttu-id="56ca2-147">非經常性存取層資料的範例包括備份、媒體內容、科學資料、合規性與封存資料。</span><span class="sxs-lookup"><span data-stu-id="56ca2-147">Examples of cool data include backups, media content, scientific data, compliance, and archival data.</span></span> <span data-ttu-id="56ca2-148">一般而言，未經常存取的任何資料都會被視為非經常性儲存層儲存體。</span><span class="sxs-lookup"><span data-stu-id="56ca2-148">In general, any data that's accessed infrequently is considered cool storage.</span></span> <span data-ttu-id="56ca2-149">根據存取頻率與保留期限等屬性來分層的資料。</span><span class="sxs-lookup"><span data-stu-id="56ca2-149">Tiering data based on attributes like frequency of access and retention period.</span></span> <span data-ttu-id="56ca2-150">客戶資料並不會被經常存取，但需要與經常性存取層資料類似的延遲和效能。</span><span class="sxs-lookup"><span data-stu-id="56ca2-150">Customer data is infrequently accessed but requires similar latency and performance to hot data.</span></span><br><span data-ttu-id="56ca2-151">用於儲存已處理資料的- **佇列儲存體**。</span><span class="sxs-lookup"><span data-stu-id="56ca2-151">- **Queue storage** for processed data storage.</span></span> <span data-ttu-id="56ca2-152">佇列儲存體可提供應用程式元件之間的雲端傳訊。</span><span class="sxs-lookup"><span data-stu-id="56ca2-152">Queue storage provides cloud messaging between app components.</span></span> <span data-ttu-id="56ca2-153">設計擴充性的應用程式時，會經常分離應用程式元件，以便進行個別擴充。</span><span class="sxs-lookup"><span data-stu-id="56ca2-153">In designing apps for scale, app components are often decoupled so they can scale independently.</span></span> <span data-ttu-id="56ca2-154">佇列儲存體可針對應用程式元件間的通訊，提供非同步傳訊，無論應用程式元件是在雲端、桌面、內部部署伺服器或行動裝置上執行。</span><span class="sxs-lookup"><span data-stu-id="56ca2-154">Queue storage delivers asynchronous messaging for communication between app components, whether they're running in the cloud, on the desktop, an on-premises server, or a mobile device.</span></span> <span data-ttu-id="56ca2-155">佇列儲存體也支援管理非同步工作並建置處理工作流程。</span><span class="sxs-lookup"><span data-stu-id="56ca2-155">Queue storage also supports managing asynchronous tasks and building process work flows.</span></span> |
| | <span data-ttu-id="56ca2-156">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="56ca2-156">Azure Functions</span></span> | <span data-ttu-id="56ca2-157">[Azure Functions](/azure/azure-functions/) 服務是由 [Azure Stack Hub 上的 Azure App Service](/azure-stack/operator/azure-stack-app-service-overview) 資源提供者提供。</span><span class="sxs-lookup"><span data-stu-id="56ca2-157">The [Azure Functions](/azure/azure-functions/) service is provided by the [Azure App Service on Azure Stack Hub](/azure-stack/operator/azure-stack-app-service-overview) resource provider.</span></span> <span data-ttu-id="56ca2-158">Azure Functions 可讓您在簡單、無伺服器的環境中執行程式碼，以回應各種事件。</span><span class="sxs-lookup"><span data-stu-id="56ca2-158">Azure Functions lets you execute your code in a simple, serverless environment in response to a variety of events.</span></span> <span data-ttu-id="56ca2-159">Azure Functions 可使用您選擇的程式設計語言調整規模以符合需求，不需要建立 VM 或發佈 Web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="56ca2-159">Azure Functions scale to meet demand without having to create a VM or publish a web app, using the programming language of your choice.</span></span> <span data-ttu-id="56ca2-160">解決方案會使用函式來進行下列工作：</span><span class="sxs-lookup"><span data-stu-id="56ca2-160">Functions are used by the solution for:</span></span><br><br><span data-ttu-id="56ca2-161">- **資料輸入**</span><span class="sxs-lookup"><span data-stu-id="56ca2-161">- **Data intake**</span></span><br><span data-ttu-id="56ca2-162">- **資料淨化**</span><span class="sxs-lookup"><span data-stu-id="56ca2-162">- **Data sterilization.**</span></span> <span data-ttu-id="56ca2-163">手動觸發的函式可以執行已排程的資料處理、清理和封存作業。</span><span class="sxs-lookup"><span data-stu-id="56ca2-163">Manually triggered functions can perform scheduled data processing, clean up, and archiving.</span></span> <span data-ttu-id="56ca2-164">範例可能包括夜間客戶清單清理與每月報表處理。</span><span class="sxs-lookup"><span data-stu-id="56ca2-164">Examples may include nightly customer list scrubs and monthly report processing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="56ca2-165">問題和考量</span><span class="sxs-lookup"><span data-stu-id="56ca2-165">Issues and considerations</span></span>

<span data-ttu-id="56ca2-166">決定如何實作此解決方案時，請考慮下列幾點：</span><span class="sxs-lookup"><span data-stu-id="56ca2-166">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="56ca2-167">延展性</span><span class="sxs-lookup"><span data-stu-id="56ca2-167">Scalability</span></span>

<span data-ttu-id="56ca2-168">Azure Functions 及儲存體解決方案會進行縮放，以滿足資料量和處理需求。</span><span class="sxs-lookup"><span data-stu-id="56ca2-168">Azure Functions and storage solutions scale to meet data volume and processing demands.</span></span> <span data-ttu-id="56ca2-169">如需有關 Azure 延展性資訊與目標，請參閱 [Azure 儲存體延展性文件](/azure/storage/common/storage-scalability-targets)。</span><span class="sxs-lookup"><span data-stu-id="56ca2-169">For Azure scalability information and targets, see [Azure Storage scalability documentation](/azure/storage/common/storage-scalability-targets).</span></span>

### <a name="availability"></a><span data-ttu-id="56ca2-170">可用性</span><span class="sxs-lookup"><span data-stu-id="56ca2-170">Availability</span></span>

<span data-ttu-id="56ca2-171">儲存體是此模式的主要可用性考量。</span><span class="sxs-lookup"><span data-stu-id="56ca2-171">Storage is the primary availability consideration for this pattern.</span></span> <span data-ttu-id="56ca2-172">大量資料的處理和散發都需要透過快速連結的連線。</span><span class="sxs-lookup"><span data-stu-id="56ca2-172">Connection via fast links is required for large data volume processing and distribution.</span></span>

### <a name="manageability"></a><span data-ttu-id="56ca2-173">管理能力</span><span class="sxs-lookup"><span data-stu-id="56ca2-173">Manageability</span></span>

<span data-ttu-id="56ca2-174">此解決方案的管理性取決於所使用的製作工具，以及是否採用原始程式碼控制。</span><span class="sxs-lookup"><span data-stu-id="56ca2-174">Manageability of this solution depends on authoring tools in use and engagement of source control.</span></span>

## <a name="next-steps"></a><span data-ttu-id="56ca2-175">後續步驟</span><span class="sxs-lookup"><span data-stu-id="56ca2-175">Next steps</span></span>

<span data-ttu-id="56ca2-176">深入了解此文章介紹的更多相關主題：</span><span class="sxs-lookup"><span data-stu-id="56ca2-176">To learn more about topics introduced in this article:</span></span>

- <span data-ttu-id="56ca2-177">請參閱 [Azure 儲存體](/azure/storage/)與 [Azure Functions](/azure/azure-functions/) 文件。</span><span class="sxs-lookup"><span data-stu-id="56ca2-177">See the [Azure Storage](/azure/storage/) and [Azure Functions](/azure/azure-functions/) documentation.</span></span> <span data-ttu-id="56ca2-178">此模式會大量使用 Azure 與 Azure Stack Hub 上的 Azure 儲存體帳戶和 Azure Functions。</span><span class="sxs-lookup"><span data-stu-id="56ca2-178">This pattern makes heavy use of Azure Storage accounts and Azure Functions on both Azure and Azure Stack Hub.</span></span>
- <span data-ttu-id="56ca2-179">若要深入了解最佳做法並獲得其他問題的解答，請參閱[混合式應用程式設計考量](overview-app-design-considerations.md)。</span><span class="sxs-lookup"><span data-stu-id="56ca2-179">See [Hybrid application design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to additional questions.</span></span>
- <span data-ttu-id="56ca2-180">若要深入了解產品與解決方案的完整組合，請參閱 [Azure Stack 系列產品和解決方案](/azure-stack)。</span><span class="sxs-lookup"><span data-stu-id="56ca2-180">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="56ca2-181">當您準備好測試解決方案範例時，請繼續參閱[階層式資料分析解決方案部署指南](https://aka.ms/tiereddatadeploy)。</span><span class="sxs-lookup"><span data-stu-id="56ca2-181">When you're ready to test the solution example, continue with the [Tiered data for analytics solution deployment guide](https://aka.ms/tiereddatadeploy).</span></span> <span data-ttu-id="56ca2-182">部署指南提供部署及測試其元件的逐步指示。</span><span class="sxs-lookup"><span data-stu-id="56ca2-182">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
